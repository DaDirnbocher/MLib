language: java
jdk:
- oraclejdk8
addons:
  sonarcloud:
    organization: mediathekview
    token:
      secure: 0KaESwMnF1zDoDDQ0PIgBAeAMhpPVym+K/D31GxFzgBjGdMnuj+DnVm1wnFhuynnAKkCApMhXiBrDYTmRzdQHjWpLtdJMiLorf8rWxvlZ4Jjhoh+RQvlsagXh94cchUBvz3ZrNqs4eFKTn3i57atTRygP2gO30iVxBOOt9QFwEeZ7bfsvXqMo4KiaYcyitmNdZAkgTkphsk4VtWqcMKMTxp5adITzFc8AkOifMi7bQivfrogzVAhjWlYi0GiH6CRl0S9Kxqzky/nSlVyMuukMl6FOT2t8DCMNrD42nehEgusTB1XaWe504iO/BcdTk4cmYwgT5UfLdl/usilwi9Az58sMCUSpJvc3M7Jjc4PqKSFmU0vozNW0oY4lGdGG3vLNqOoTd8+TPpW7JpRZpjsa7YEeAoizdivkUxG86DaTGNkCEh4kAXpIFahLNSMO1gREmJHkD2gdz+luhkIMjyMp+cqq+EKhG8T0g0SmIiDiJkL9nCCVc5InS9vWNxINhjr4R0GtVp1p+YINknkO1k5IZ53sNY47yKFZz88zWKy7jyN20abwPIv5qccwa0yTbiLC+al0IyaIeC9AWOgikuFY8Su5aaGIK8ZNdlq0gcNz0iw1igjc+Y0qOuA9JHMGHZkT3qujC7KdLTUUSDNG9ImKmzsycl/Nt+deOPqVq1Hbjw=
    github_token:
      secure: g1ScaT1Ck6osYVnOx6yRCJyS99/1xkB4cQOwBSxMfz8kaj3QCUVPs/HkzP6Em0rXSiKWuUGNviGgthK1gM7JOmkNU3wf0pY5vpcFy5QBYtS9OFRr9tk6XMEL4F1myFtPiulkDsmiveVzoGVIux4CTJJkWTUFEaYl6bmRryb3mm+XYVFMXGHYjoaBhpN4IoNVngBKEWkyBEh4yaf/7Ao1bXWZvgb1ai7v/tnOTyWmEL8a8ZCmLmCkpjwu2hVWtaJ/6J1mwN90d1UbA9ZK6Ci3AYtf2zMdYhudi0n8VHBdZXdO4Pau/k3wR1mwMOW79zfQAaXuabeSQB79XauHjUcGAgA0Gt0Lf9xUKfZv8uAziXhO2aPEjbFMEJiYtX1EIWg5+9C3APrLVXxagZQPVVZsWb8fS1TZP5wkq7VR5vlb3/VVR4q5iwUemGCJVyXvjT+tPKejF2S3OKZli3Dt17paTZkcGRZ86h7NFguzcfBUMIsCuya4Ga9bLMp0dBDrJbSmvhgWWQiXz75tzGd355QAnScfdrVnLSc9eNYaPctLtJgeZ6g8TuaywUPeDjy/aQdPqe0WdwWT6M7OR6DH5fFapQVT/X+b7ouiMs0q2BwCzneD5+k9aE5FQSNw3P9Bunwm8kpv96IH5xrbH//L1GeBCpq3TDl8WnVAOTa9gSSH0ec=
    branches:
    - master
    - develop
    - feature/.*
    - hotfix/.*
env:
  global:
  - secure: vROFVCc18khzwp59MCvb7NqqhlSM07krRp27hnrYQePTm0YjfNo/fWd2R6/IP9ZrOuWfeFPvZI9ci1Q2MBFm2PUz9OLQg2UiKRk9XHN/u/aQsDaEO4Xlyuj9ONaIzYPjxXVIYw09gDZK34pOKFXmmb4Ef/lliHA91oMprUMB0k4yZRZSeF4o7UCL7UbNGWlg839Tg9hqKebL4vXuNwuoB75TgsqkKu3ayJVq+YD9bA+qzuygf8t8NlcdaHGbmRIPQigJFaUDehp9ntsKQNxazPtiwKB9rmnbtaKkdJNy1f0YAdQxmznSKc18bdGWr9eA69mVkPWrUlSxb304wBHB9CKnQT8yaWlFjMZSjyrIz5Xp7dNcJUHQ7Y19mG1ZmCmQxZd1uP7vA60kSUocCycciV2X0+CjdiYqFhjhiCLkrm3BD9TM7u2g7HjneRyK/5gkyxQo5YW8vfWtVy65vgiAlc0oVRA1YvhRq7v+ppnL3Fhz7osVVc15rZePjQyQ6mSURZ5r94EUU2Jcd6rbxiLnsKycr2dZDfDHhxgQ2L86WsclakoQXitRg2GpabSu/fjIaFAzOVnK5ezXFZaCoWaPJ8IwfMB8U4I0uQDCoWjUXl6c3uAI18xIHF1idvNIiEHiqfUIm0ZiEKLpL2m4EKpx6ig/nYNgNvwI8NDXXAIU56k=
  - secure: DkjBEnlpfUKtNvfMJJXDgb7zG6quDKC/ueSs2I0xPnmLtYtWtjzXrJrsr7/r45AYTfcyPa91/Nr0DaIl4v0QWslJ24Lk9OOUne9TkS4lEUfLvyVhpVVivuLnTFYkpe8B4OGOYInneqfjNDjthG7tkHSCVlBCd2CMwxNFyaz1sfzlIiAUVPhui72kYNp6fSuPWNQoyLeLj4VWAIMZ91rDBgy+fVULTL399SNC9GV3BrCdntRj8oKd1dV4leCSpcnYqv9xhlTo+o16UT1e+1e1ZC9e8ZU0X1SM1GwsBgUgObj3RepHQ1q5Y0vu4Tw9iyUY8QIoABaO/jAlvXmSxGVvHqjzVhxESEJ7ZtD7QsIeANR3mEBZ5wFTfqP9EbADEe75rDzYN91gnlwJHhVPg4yeslKty/nBjaMNB97poHB1PVEmL66u1mH15aSoKQdz0OeV9sA3solOfRVmpN/L7Ef8D+rUV2BwisgyVv+TycB6kLTcI2mAZ3x5mXh1ADU2ONz0IWRiAEMC/GpvD/L7Tef0OzQrJdG7R2AAVQt0fUE8ArR5A9W/4b5OwrVhX+EJKMC1QPDw1kh3etgtHhN3eb2+AtcmYj4AkeCUrLZ15QuLrcqXEpVTlraWTiIg+Er90CZzdaH0aRqe9kFX1I5lZrt6BjbIT7OhhfsDXBSmxOCpyE8=
  - secure: bhmfzwRCHo50/+tjCDFKz6cAsPj5jgZOBwPS+IaJKp4PySaEugWW1oAZX1WShrhmqpa/b2ro6k389O2R2ObWDuV1ta4JPn6NGxU6IW2AGN5DLmJrJ7FsuXlbx4J7znhow24ysJJAtNfKIZjazzwG3WRNaW5mZdcjw/eI0MrlOOuKHjOEpjg4oB+v11qbGUwWkkzh3xDpVAOvM7zQ1RCsg1ESM91ENhB3mNYqmQAPgqQKAi2ROkOvIr960lTg43lp4CPeOj/P9Qef7Er0GPyjWxJAs2ubi6GBucg0m0Ha45M/ADa17wdz1kdQiqyHN9jqTr7/PxzBQ/geVydwwg8PI5kQMhCmCcFGMfqekTn2t8y22bY1w8jhddZ0+bVqvUFYpxvA6ZHBM/Kxz4Vc++qfImiF49fATxCH3A0hvumGuQyg6yXvfgwcl8IzgOC8nZIhQXI50vf5+L9XdtgLr+bjikuHDOZ+sM5WxiEKTFxpqBRWse6Q7vw8qSPUTRYzkxS7PTCD+hOPwRR004Cx006I0mn6g5YfYKAqza8yJJq2R5ciZlyckFJ0061W6uVV1lZ4cuDlph/09Bx5MPBbR3LoVZD5Os3oYmkOwUTQXSznfGmPKdzdkj/HqJlArxkZY708sBySrJsmq9rZz8aW8YmcVgIL8nYz/mp9ld58tD0EMvM=
  - secure: QUCpVAc0q04X8Nz5lVQU+euxn96HBC3rW1ve1eq2shw3cM9NQoOcVYJo3oTZQ6ZOlD31Gx2+tMkGowKVqZU16Wfzyjr2CChKANvcKwyNQzMPwe03IRncXeZeo6oxu9YBFtdMjCIiNiXZSDBa1SRnw5me18G1HWXg/NAe8pR4+0hq85sLd+oQzSUuKNG+6kviamr5u0czrvJ3e8oXvh9lNVZSs/2mDy6SLn4jXlIv2CwyaK7TgB7BX7e+3Iu0cy/FHWYbWtW0GyvjevoPwN2E+aTs7UaU6t6tPsRqDoHXYx+f6O/jcj4ov5n+CexzeMgWJwd+M/8GMT8c8yNcY7ZYf0jj4DMiRDj1WOUnTv87LMjSvqBH2HQAEE2RVB4TbZKPyot60ggJA3na8VvPJ+uIqbIqn7mzPHVxPhrTcWy61qs9YFhf/ZoZ34dD0SnsytotYvWl7SynqeBQzHmuuPaj9JiZAMbc/rGOPSwfZiZ2jNRgJpmrn+AywAZ1w4LRIsP3+h7kg4LPXEzOEr63Moc9SjuRQrVGk1IdocVBIPV1MuN3f9D1XzYnTJegojWnB/RVfFIFGGMmkgBKWgcaA/tdTo9c0zoIiP72zJJ2zxQgRG86PqfxG3hAVMyySpUCcgha87jPEuc9jPqKStjmxJW/wkKSoxgB3lbde0oj9v2Wqb4=
  - secure: dQcNnJWCYwL8n0dRS5zqjBoKsMVELiLsVVDKtH5UHylsCYc52iSLQpPpxKYtTcAfWtpIejLN7PiwP1vBUaxI6jRhfC+WUONS0hdhpP/EwGtASQyJCMpP6pHJboniqtAuJLYwDW8ez/NXzfc2hYXuRPXGlYg0v0XBl40Jz44M9IRuxEpAdWY1KJEQBQUiTOInAeV4Z+ZYWSb/RjU2xuLQB+lKFhBqC0g6gr31CbiRf7OTCfbfOxc/WYNCGKjKDfH1iGKNpUU1D6JFVdeHv47ygszCE+KZQgpwx3+RPkDxONT2r9LgNp5Rbj/RlqqtKzx/nqnCPn1I4IiTvXjRMhJQqiF0u6pNjXqxnja6zNVms6uHL/+MTkf120dTXmC9ckeM7uJ+uLk23gBASAX2CDngOU6w47ShEMjygBxCuUvEDwUboU7w1+qvw3f+1zzgvnI9GKb6U664y85C8G7FAR/lFMFA6R60WiuoauVrSjFewb6hYbCFCEIU8UVn+X9prOqMEUZ7Z7sWNvYhQws+rkph/xkmAG85yhAbL5m/rUVJHNU/c03D53FoR9x1mFOSa9FBzCH9HcU2BcASD2C9peAVe+2Xbo6A13gToaihjoYpLKocBBqgbXM+5j3KqhK3BVky+4Wx2XO+hOEEh3sTs0xwCXeh7qQbquaWwddFD/OVfFM=
  - secure: ZHY7kFqMONRwAP7UnaM7aF8X/Nge6+HmprbreTVIXgnRbLdtgkz3sU/LEgl72ts9ZGBy8PbFGJGYTBFPFR0fNuaJiskYwB1RnRqUTw4q7IPhxapu1Lq45e18uF0+H+ehGffACSRFvR3YUgrYlsL3PQCK35r3rqEcNFJPunDg5eowmJFtj7DXfx0ww+S3dIj99HXmyxxxQ4YycNnlsO5UhvMYTRsqk5BUZWp6LF2FAN1ZKIFizdmw3ZuEFuNCrWG6G2egaaVoAaeKYBeIDODcITXZbSDQnJf+TAil0PdIM/xZU7xth38+kf5V6pIm3auyYb774Jnk/eOmNYKd+8AQHWbE3bAIeyOjC0VaqsOc/4o9Gy76DwioycRhoGvsH616nV7VfPM1tu7t9EBvkInfV1ChXmStlYdjwi8BIiuLHpSWJPUXpq3VajVGAzy+cPbHavkjEbPolGrTE5L0MZ1xSlSyWLzdp1kpApv+vDCOPDGYHhaQrIrHhHspnpHO0SHCor7oNgDaV+fRTEV8Ydjns1O7ZlcU3rA2CUI22zj341RnQFGN4dsbJtMF9KXnRuWPfroq0jpa922Hd5/xKyrkSHAceU4bPnv0FGR12yL7BAPgEOc2AqX10W+m3MiD1o7yeYgd81pGPNkqSJF3lx6Y2oiqEiy9vtfbsQ6teCqk8Mc=
before_script:
- openssl aes-256-cbc -pass pass:$ENCRYPTION_PASSWORD -in scripte/deploy/secring.gpg.enc
  -out scripte/deploy/secring.gpg -d
script:
- "./gradlew check build"
- if [ "$TRAVIS_BRANCH" == "develop" ]; then ./gradlew releaseSnapshot -PSONATYPE_USERNAME=$SONATYPE_USERNAME
  -PSONATYPE_PASSWORD=$SONATYPE_PASSWORD -Psigning.keyId=$GPG_KEYNAME -Psigning.password=$GPG_PASSPHRASE
  -Psigning.secretKeyRingFile=scripte/deploy/secring.gpg; fi
after_success:
- sonar-scanner
before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
  - "$HOME/.sonar/cache/"
before_deploy:
- openssl aes-256-cbc -pass pass:$ENCRYPTION_PASSWORD -in scripte/deploy/secring.gpg.enc
  -out scripte/deploy/secring.gpg -d
- "./gradlew release -PSONATYPE_USERNAME=$SONATYPE_USERNAME -PSONATYPE_PASSWORD=$SONATYPE_PASSWORD
  -Psigning.keyId=$GPG_KEYNAME -Psigning.password=$GPG_PASSPHRASE -Psigning.secretKeyRingFile=scripte/deploy/secring.gpg"
deploy:
  provider: releases
  api_key:
    secure: g1ScaT1Ck6osYVnOx6yRCJyS99/1xkB4cQOwBSxMfz8kaj3QCUVPs/HkzP6Em0rXSiKWuUGNviGgthK1gM7JOmkNU3wf0pY5vpcFy5QBYtS9OFRr9tk6XMEL4F1myFtPiulkDsmiveVzoGVIux4CTJJkWTUFEaYl6bmRryb3mm+XYVFMXGHYjoaBhpN4IoNVngBKEWkyBEh4yaf/7Ao1bXWZvgb1ai7v/tnOTyWmEL8a8ZCmLmCkpjwu2hVWtaJ/6J1mwN90d1UbA9ZK6Ci3AYtf2zMdYhudi0n8VHBdZXdO4Pau/k3wR1mwMOW79zfQAaXuabeSQB79XauHjUcGAgA0Gt0Lf9xUKfZv8uAziXhO2aPEjbFMEJiYtX1EIWg5+9C3APrLVXxagZQPVVZsWb8fS1TZP5wkq7VR5vlb3/VVR4q5iwUemGCJVyXvjT+tPKejF2S3OKZli3Dt17paTZkcGRZ86h7NFguzcfBUMIsCuya4Ga9bLMp0dBDrJbSmvhgWWQiXz75tzGd355QAnScfdrVnLSc9eNYaPctLtJgeZ6g8TuaywUPeDjy/aQdPqe0WdwWT6M7OR6DH5fFapQVT/X+b7ouiMs0q2BwCzneD5+k9aE5FQSNw3P9Bunwm8kpv96IH5xrbH//L1GeBCpq3TDl8WnVAOTa9gSSH0ec=
  file_glob: true
  file:
  - build/libs/*
  skip_cleanup: true
  on:
    tags: true
